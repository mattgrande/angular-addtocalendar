!function(t){function e(a){if(n[a])return n[a].exports;var r=n[a]={i:a,l:!1,exports:{}};return t[a].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,a){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:a})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=7)}([function(t,e){!function(){"use strict";function t(t,e,n){return{restrict:"A",link:function(a,r,o){n(function(){function i(t){var i,l,s,d,f,p;if(!angular.element(r).hasClass("ng-hide")&&t&&t.target){for(l=t.target;l;l=l.parentNode){if(l===r[0])return;if(d=l.id,f=l.className,p=u.length,f&&void 0!==f.baseVal&&(f=f.baseVal),f||d)for(i=0;i<p;i++)if(s=new RegExp("\\b"+u[i]+"\\b"),void 0!==d&&d===u[i]||f&&s.test(f))return}n(function(){(c=e(o.clickOutside))(a,{event:t})})}}function l(){return"ontouchstart"in window||navigator.maxTouchPoints}var c,u=void 0!==o.outsideIfNot?o.outsideIfNot.split(/[ ,]+/):[];l()&&t.on("touchstart",i),t.on("click",i),a.$on("$destroy",function(){l()&&t.off("touchstart",i),t.off("click",i)})})}}}angular.module("angular-click-outside",[]).directive("clickOutside",["$document","$parse","$timeout",t])}()},function(t,e,n){!function(e,n){t.exports=n()}(0,function(){return function(t){function e(a){if(n[a])return n[a].exports;var r=n[a]={exports:{},id:a,loaded:!1};return t[a].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";t.exports="ngFileSaver",angular.module("ngFileSaver",[]).factory("FileSaver",["Blob","SaveAs","FileSaverUtils",n(1)]).factory("FileSaverUtils",[n(2)]).factory("Blob",["$window",n(3)]).factory("SaveAs",[n(5)])},function(t,e){"use strict";t.exports=function(t,e,n){function a(t,a,r){try{e(t,a,r)}catch(t){n.handleErrors(t.message)}}return{saveAs:function(t,e,r){return n.isBlobInstance(t)||n.handleErrors("Data argument should be a blob instance"),n.isString(e)||n.handleErrors("Filename argument should be a string"),a(t,e,r)}}}},function(t,e){"use strict";t.exports=function(){return{handleErrors:function(t){throw new Error(t)},isString:function(t){return"string"==typeof t||t instanceof String},isUndefined:function(t){return void 0===t},isBlobInstance:function(t){return t instanceof Blob}}}},function(t,e,n){"use strict";n(4),t.exports=function(t){return t.Blob}},function(t,e){/*! @source http://purl.eligrey.com/github/Blob.js/blob/master/Blob.js */
!function(t){"use strict";if(t.URL=t.URL||t.webkitURL,t.Blob&&t.URL)try{return void new Blob}catch(t){}var e=t.BlobBuilder||t.WebKitBlobBuilder||t.MozBlobBuilder||function(t){var e=function(t){return Object.prototype.toString.call(t).match(/^\[object\s(.*)\]$/)[1]},n=function(){this.data=[]},a=function(t,e,n){this.data=t,this.size=t.length,this.type=e,this.encoding=n},r=n.prototype,o=a.prototype,i=t.FileReaderSync,l=function(t){this.code=this[this.name=t]},c="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),u=c.length,s=t.URL||t.webkitURL||t,d=s.createObjectURL,f=s.revokeObjectURL,p=s,g=t.btoa,v=t.atob,h=t.ArrayBuffer,b=t.Uint8Array;for(a.fake=o.fake=!0;u--;)l.prototype[c[u]]=u+1;return s.createObjectURL||(p=t.URL=function(t){var e,n=document.createElementNS("http://www.w3.org/1999/xhtml","a");return n.href=t,"origin"in n||("data:"===n.protocol.toLowerCase()?n.origin=null:(e=t.match(/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/),n.origin=e&&e[1])),n}),p.createObjectURL=function(t){var e,n=t.type;return null===n&&(n="application/octet-stream"),t instanceof a?(e="data:"+n,"base64"===t.encoding?e+";base64,"+t.data:"URI"===t.encoding?e+","+decodeURIComponent(t.data):g?e+";base64,"+g(t.data):e+","+encodeURIComponent(t.data)):d?d.call(s,t):void 0},p.revokeObjectURL=function(t){"data:"!==t.substring(0,5)&&f&&f.call(s,t)},r.append=function(t){var n=this.data;if(b&&(t instanceof h||t instanceof b)){for(var r="",o=new b(t),c=0,u=o.length;c<u;c++)r+=String.fromCharCode(o[c]);n.push(r)}else if("Blob"===e(t)||"File"===e(t)){if(!i)throw new l("NOT_READABLE_ERR");var s=new i;n.push(s.readAsBinaryString(t))}else t instanceof a?"base64"===t.encoding&&v?n.push(v(t.data)):"URI"===t.encoding?n.push(decodeURIComponent(t.data)):"raw"===t.encoding&&n.push(t.data):("string"!=typeof t&&(t+=""),n.push(unescape(encodeURIComponent(t))))},r.getBlob=function(t){return arguments.length||(t=null),new a(this.data.join(""),t,"raw")},r.toString=function(){return"[object BlobBuilder]"},o.slice=function(t,e,n){var r=arguments.length;return r<3&&(n=null),new a(this.data.slice(t,r>1?e:this.data.length),n,this.encoding)},o.toString=function(){return"[object Blob]"},o.close=function(){this.size=0,delete this.data},n}(t);t.Blob=function(t,n){var a=n?n.type||"":"",r=new e;if(t)for(var o=0,i=t.length;o<i;o++)Uint8Array&&t[o]instanceof Uint8Array?r.append(t[o].buffer):r.append(t[o]);var l=r.getBlob(a);return!l.slice&&l.webkitSlice&&(l.slice=l.webkitSlice),l};var n=Object.getPrototypeOf||function(t){return t.__proto__};t.Blob.prototype=n(new t.Blob)}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content||this)},function(t,e,n){"use strict";t.exports=function(){return n(6).saveAs||function(){}}},function(t,e,n){var a,r=r||function(t){"use strict";if(!(void 0===t||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var e=t.document,n=function(){return t.URL||t.webkitURL||t},a=e.createElementNS("http://www.w3.org/1999/xhtml","a"),r="download"in a,o=function(t){var e=new MouseEvent("click");t.dispatchEvent(e)},i=/constructor/i.test(t.HTMLElement)||t.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent),c=function(e){(t.setImmediate||t.setTimeout)(function(){throw e},0)},u=function(t){var e=function(){"string"==typeof t?n().revokeObjectURL(t):t.remove()};setTimeout(e,4e4)},s=function(t,e,n){e=[].concat(e);for(var a=e.length;a--;){var r=t["on"+e[a]];if("function"==typeof r)try{r.call(t,n||t)}catch(t){c(t)}}},d=function(t){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t},f=function(e,c,f){f||(e=d(e));var p,g=this,v=e.type,h="application/octet-stream"===v,b=function(){s(g,"writestart progress write writeend".split(" "))};if(g.readyState=g.INIT,r)return p=n().createObjectURL(e),void setTimeout(function(){a.href=p,a.download=c,o(a),b(),u(p),g.readyState=g.DONE});!function(){if((l||h&&i)&&t.FileReader){var a=new FileReader;return a.onloadend=function(){var e=l?a.result:a.result.replace(/^data:[^;]*;/,"data:attachment/file;");t.open(e,"_blank")||(t.location.href=e),e=void 0,g.readyState=g.DONE,b()},a.readAsDataURL(e),void(g.readyState=g.INIT)}if(p||(p=n().createObjectURL(e)),h)t.location.href=p;else{t.open(p,"_blank")||(t.location.href=p)}g.readyState=g.DONE,b(),u(p)}()},p=f.prototype,g=function(t,e,n){return new f(t,e||t.name||"download",n)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(t,e,n){return e=e||t.name||"download",n||(t=d(t)),navigator.msSaveOrOpenBlob(t,e)}:(p.abort=function(){},p.readyState=p.INIT=0,p.WRITING=1,p.DONE=2,p.error=p.onwritestart=p.onprogress=p.onwrite=p.onabort=p.onerror=p.onwriteend=null,g)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);void 0!==t&&t.exports?t.exports.saveAs=r:null!==n(7)&&null!==n(8)&&void 0!==(a=function(){return r}.call(e,n,e,t))&&(t.exports=a)},function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,e){(function(e){t.exports=e}).call(e,{})}])})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={startDate:"@",endDate:"@",title:"@",description:"@",location:"@",btnText:"@",hoverText:"@",format:"@",className:"@",useCaret:"@",useBootstrap:"@"}},function(t,e,n){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),o=function(){function t(){a(this,t)}return r(t,null,[{key:"getMilitaryHours",value:function(t){return t%1==.5?Math.floor(t)+"30":Math.round(t)+"00"}},{key:"getHoursDuration",value:function(t,e,n){var a=new moment(t),r=new moment(e);n&&(a.utcOffset(n),r.utcOffset(n));var o=moment.duration(r.diff(a)).asHours();return this.getMilitaryHours(o)}},{key:"formatIcsText",value:function(t,e){return t?(t=t.replace(/\n/g,"\\n"),t=t.substring(0,e)):""}},{key:"toUniversalTime",value:function(t,e){var n=moment(t);return e&&n.utcOffset(e),n.format("YYYYMMDDTHHmmss")}},{key:"getIcsBlob",value:function(t){return new Blob([t],{type:"application/octet-stream"})}},{key:"getIcsFileName",value:function(t){return t?t.replace(/[^\w ]+/g,"")+".ics":"event.ics"}},{key:"getUid",value:function(){return Math.random().toString(36).substr(2)}},{key:"getTimeCreated",value:function(){return(new moment).format("YYYYMMDDTHHmmss")}}]),t}();e.default=o},function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}();n(1),n(0);var i=n(3),l=a(i),c=n(8),u=a(c),s=n(2),d=a(s),f=function(){function t(e,n){r(this,t),this.FileSaver=n,this.dates={},this.init.call(this),this.watchAttrs.call(this,e)}return o(t,[{key:"watchAttrs",value:function(t){var e=this;Object.keys(t).forEach(function(n){t.$observe(n,e.init.bind(e))})}},{key:"setTimesFromFormat",value:function(){var t=this;["startDate","endDate"].forEach(function(e){t.dates[e]=l.default.toUniversalTime(t[e],t.timezone)})}},{key:"getSanitizedData",value:function(){var t=this,e={};return Object.keys(d.default).forEach(function(n){e[n]=encodeURIComponent(t[n]||"")}),e}},{key:"buildUrl",value:function(){var t=angular.extend(this.getSanitizedData.call(this),this.dates),e=angular.extend({},this,this.dates);this.calendarUrl={microsoft:u.default.getMicrosoftCalendarUrl(t),google:u.default.getGoogleCalendarUrl(t),yahoo:u.default.getYahooCalendarUrl(t),icalendar:u.default.getIcsCalendar(e),dlIcal:this.dlIcal.bind(this)}}},{key:"dlIcal",value:function(){var t=l.default.getIcsFileName(this.title),e=this.calendarUrl.icalendar,n=l.default.getIcsBlob(e);this.FileSaver.saveAs(n,t)}},{key:"toggleMenu",value:function(t){this.isOpen=t}},{key:"init",value:function(){this.setTimesFromFormat.call(this),this.buildUrl.call(this)}}]),t}();e.default=f,f.$inject=["$attrs","FileSaver"]},function(t,e){},function(t,e){t.exports='<div\n  class="{{ addtocalendar.useBootstrap ? \'\' : \'atc-\' }}btn-group {{ addtocalendar.className }}"\n  ng-class="{\n    active: addtocalendar.isOpen\n  }"\n  title="{{ addtocalendar.hoverText || addtocalendar.title }}"\n  click-outside="addtocalendar.toggleMenu(false)">\n  \n  <span\n    type="button"\n    ng-class="{\n      \'btn btn-default dropdown-toggle\': addtocalendar.useBootstrap\n    }"\n    ng-click="addtocalendar.toggleMenu(true)"\n    data-toggle="dropdown">\n    {{ addtocalendar.btnText || \'Add to calendar\' }}\n    <span class="caret" ng-hide="addtocalendar.hideCaret"></span>\n  </span>\n\n  <ul\n    ng-show="addtocalendar.isOpen"\n    ng-class="{\n      \'dropdown-menu\': addtocalendar.useBootstrap,\n      \'atc-dropdown\': !addtocalendar.useBootstrap\n    }">\n    <li>\n      <a\n        ng-click="addtocalendar.calendarUrl.dlIcal()"\n        ng-if="addtocalendar.calendarUrl.dlIcal">\n        iCalendar\n      </a>\n    </li>\n    <li>\n      <a\n        href="{{addtocalendar.calendarUrl.google}}"\n        target="_blank">\n        Google Calendar\n      </a>\n    </li>\n    <li>\n      <a\n        ng-click="addtocalendar.calendarUrl.dlIcal()"\n        ng-if="addtocalendar.calendarUrl.dlIcal">\n        Outlook\n      </a>\n    </li>\n    <li>\n      <a\n        href="{{addtocalendar.calendarUrl.yahoo}}"\n        target="_blank">\n        Yahoo! Calendar\n      </a>\n    </li>\n    <li>\n      <a\n        href="{{addtocalendar.calendarUrl.microsoft}}"\n        target="_blank">\n        Microsoft Calendar\n      </a>\n    </li>\n  </ul>\n</div>'},function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(4),o=a(r),i=n(2),l=a(i),c=n(6),u=a(c);n(5);var s={template:u.default,controller:o.default,controllerAs:"addtocalendar",bindings:l.default};angular.module("angular-atc",["ngFileSaver","angular-click-outside"]).controller("AddtocalendarCtrl",o.default).component("addtocalendar",s),e.default="angular-atc"},function(t,e,n){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),o=n(3),i=function(t){return t&&t.__esModule?t:{default:t}}(o),l=function(){function t(){a(this,t)}return r(t,null,[{key:"getYahooCalendarUrl",value:function(t){var e="http://calendar.yahoo.com/?v=60&view=d&type=20",n=i.default.getHoursDuration(t.startDate,t.endDate);return e+="&TITLE="+t.title,e+="&ST="+t.startDate+"&DUR="+n,e+="&DESC="+t.description,e+="&in_loc="+t.location}},{key:"getMicrosoftCalendarUrl",value:function(t){var e="http://calendar.live.com/calendar/calendar.aspx?rru=addevent";return e+="&summary="+t.title,e+="&dtstart="+t.startDate+"&dtend="+t.endDate,e+="&description="+t.description,e+="&location="+t.location}},{key:"getGoogleCalendarUrl",value:function(t){var e="https://www.google.com/calendar/render?action=TEMPLATE";return e+="&text="+t.title,e+="&dates="+t.startDate+"/"+t.endDate,e+="&details="+t.description,e+="&location="+t.location}},{key:"getIcsCalendar",value:function(t){return["BEGIN:VCALENDAR","VERSION:2.0","BEGIN:VEVENT","CLASS:PUBLIC","DESCRIPTION:"+i.default.formatIcsText(t.description,62),"DTSTART:"+t.startDate,"DTEND:"+t.endDate,"LOCATION:"+i.default.formatIcsText(t.location,64),"SUMMARY:"+i.default.formatIcsText(t.title,66),"TRANSP:TRANSPARENT","END:VEVENT","END:VCALENDAR","UID:"+i.default.getUid(),"DTSTAMP:"+i.default.getTimeCreated(),"PRODID:angular-addtocalendar"].join("\n")}}]),t}();e.default=l}]);